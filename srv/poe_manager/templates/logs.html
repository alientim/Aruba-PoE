{% extends "base.html" %}
{% block content %}

<h2>Live Log</h2>

<div id="log-box" class="border p-3 bg-light" style="height:500px; overflow:auto; white-space: pre-wrap; font-family: monospace;"></div>

<script>
let lastUpdateTime = 0;
function fetchLog() {
    const now = Date.now() / 1000;
    if (now - lastUpdateTime < 300) return;
    fetch("{{ url_for('get_log') }}")
        .then(response => response.text())
        .then(data => {
            const box = document.getElementById("log-box");
            box.innerText = data;
            box.scrollTop = box.scrollHeight;
            lastUpdateTime = now;
        })
        .catch(err => console.error("Fehler beim Laden der Logs:", err));
}
setInterval(fetchLog, 5000);
fetchLog();
</script>

{% endblock %}
